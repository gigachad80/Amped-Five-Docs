## 9. CHEAT SHEET - QUICK REFERENCE CARD

### IMMEDIATE ACTION GUIDE

**First 3 Steps (ALWAYS)**
1. LOAD → Import media
2. ANALYZE → Hash Code (SHA-256), Metadata, Histogram
3. INTERLACE → Deinterlace (if interlaced video)

---

**If Image is DARK**
→ CLAHE (Block 100-150, Clip 3.0) + Curves

**If Image is NOISY**
→ Bilateral Filter (Space 30, Range 0.2, Iter 2)

**If Image is BLURRY**
→ Motion Deblur (measure angle/size) OR Optical Deblur (PSF 15, Strength 0.7)

**If Image is COMPRESSED/BLOCKY**
→ Deblocking (Strength 0.7) → Bilateral

**If Image has DISTORTION**
→ Undistort OR Correct Fisheye (BEFORE measurement!)

---

**Multi-Frame Available?**
→ Temporal Smoothing (Size 5) OR Super Resolution (10+ frames)

---

**Enhancement Phase**
1. CLAHE (local contrast) OR Levels/Curves
2. Unsharp Masking (Radius 1.0, Amount 1.0, Threshold 2)

---

**Measurement Needed?**
→ Distortion correction FIRST → THEN Measure 1D/2D/3D

---

**Final Steps**
1. Compare Original (before/after)
2. Annotate (labels, measurements, frame numbers)
3. Export + new Hash Code

---

### THE BIG FIVE FILTERS (80% of Forensic Work)

1. **Bilateral Filter** - Default denoise (edges preserved)
2. **CLAHE** - Default contrast enhancement (local, mixed lighting)
3. **Unsharp Masking** - Default sharpening (controllable, noise-protected)
4. **Color Deconvolution** - Color separation (inks, stamps, overlapping colors)
5. **Annotate** - Comprehensive presentation (all court documentation)

---

### CRITICAL DECISION POINTS

**Denoise Method?**
- Bilateral (default) for edge preservation
- Median for salt-pepper impulse noise
- Wiener for general degradation

**Contrast Enhancement?**
- CLAHE for mixed lighting (most common)
- Histogram Eq for uniform lighting
- Curves for maximum control

**Deblur Type?**
- Motion for linear streaks
- Optical for uniform softness
- Variable for changing blur per frame
- Nonlinear for camera shake + object motion

**Sharpening?**
- Unsharp Masking (always preferred)
- Laplacian ONLY if exceptionally clean
- Adaptive for mixed detail distribution

**Multi-Frame?**
- Temporal for static denoise
- Motion Smoothing for moving subjects
- Super Resolution for resolution increase

---

### ABSOLUTE RULES (NEVER VIOLATE)

1. **Fingerprints**: Resize 1:1 ONLY (never Smart Resize)
2. **Measurement**: Distortion correction FIRST (Undistort/Fisheye)
3. **Filter order**: Denoise → Deblur → Sharpen (never reverse)
4. **Frame rate**: VERIFY metadata before Speed Estimation
5. **Hash codes**: Generate BEFORE processing AND after export
6. **Court reports**: ALWAYS include Compare Original
7. **Fourier Filter**: ONLY for periodic patterns (not random noise)
8. **CLAHE over Histogram Eq**: For mixed lighting scenes
9. **Bilateral over Gaussian**: For forensic edge preservation
10. **Temporal Smoothing**: Small frame sizes (3-5) to avoid ghosting

---

### TYPICAL PARAMETER RANGES

| Filter | Low | Medium | High | Notes |
|--------|-----|--------|------|-------|
| Bilateral Space_sigma | 20 | 30 | 40 | Higher = stronger denoise |
| Bilateral Range_sigma | 0.1 | 0.2 | 0.3 | Higher = looser edge preservation |
| CLAHE Block size | 50px | 100px | 200px | Smaller = more local |
| CLAHE Clip limit | 2.0 | 3.0 | 4.0 | Higher = stronger enhancement |
| Unsharp Radius | 0.5 | 1.0 | 2.0 | Smaller = finer detail |
| Unsharp Amount | 0.5 | 1.0 | 1.5 | Higher = stronger sharpening |
| Unsharp Threshold | 1 | 2 | 3 | Higher = protect more low-contrast |
| Temporal Frame size | 3 | 5 | 7 | Higher = more denoise, risk ghosting |
| Deblocking Strength | 0.5 | 0.7 | 1.0 | Based on Macroblocks severity |

---

### FORENSIC WORKFLOW CHECKLIST

**BEFORE PROCESSING:**
- [ ] Hash original file (SHA-256)
- [ ] Document metadata (device, timestamp, GPS if available)
- [ ] Check histogram (assess exposure)
- [ ] Check for interlacing (deinterlace if needed)
- [ ] Verify frame rate (if video, critical for speed estimation)

**DURING RESTORATION:**
- [ ] Deblock if H.264 artifacts visible
- [ ] Bilateral denoise (if noisy)
- [ ] Deblur as appropriate (measure blur parameters)
- [ ] Correct distortion BEFORE measurement

**DURING ENHANCEMENT:**
- [ ] CLAHE for dark areas / mixed lighting
- [ ] Unsharp Masking after denoise (with threshold protection)
- [ ] Curves for precise tonal control

**BEFORE MEASUREMENT:**
- [ ] Verify distortion correction complete
- [ ] Ensure reference objects visible and measurable
- [ ] Document known reference measurements

**BEFORE PRESENTATION:**
- [ ] Generate Compare Original (before/after)
- [ ] Annotate with evidence labels, frame numbers, measurements
- [ ] Verify no content fabrication
- [ ] Redact third-party privacy as needed

**FINAL EXPORT:**
- [ ] Export enhanced version
- [ ] Generate new hash code
- [ ] Document both hashes in report
- [ ] Include methodology documentation
- [ ] Include parameter documentation

